extends layout 

block content 
    div(class="flex flex-cols bg-white w-full px-6 py-8 shadow-xl ring-1 ring-gray-900/5 sm:rounded-lg")
        //- Messages go here
        div(class="flex flex-col gap-5 flex-1")
            if messages.length 
                each message in messages 
                    div(class="bg-blue-50 py-3 px-6 shadow-xl ring-2 ring-blue-600 rounded-lg")
                        div(class="grid grid-cols-message gap-2.5")
                            div(class="flex justify-center items-center")
                                div(class="rounded-full bg-blue-500 px-5 py-2.5")
                                    p(class="text-center text-xl font-black text-white weight-bold")=message.author.username[0].toUpperCase()
                            div(class="pl-5")
                                p(class="text-lg")=message.subject 
                                p(class="py-2.5")=message.content
                                if user.member
                                    p=message.author.username
                                else 
                                    p #[i Become a member to see who wrote this message]
                            div(class="flex items-end") 
                                div
                                p(class="text-sm text-right")=message.date_formatted
            else        
                p There are no messages here!
    div(class="relative bg-white w-full px-6 py-8 shadow-xl ring-1 ring-gray-900/5 sm:rounded-lg")
        h1(class="text-xl font-bold tracking-tight text-slate-900 text-nowrap max-sm:text-wrap") Write a new message
        if user.member
            form(class="space-y-6" action="/users/dashboard/new-message" method="POST")
                div
                    label(for="subject") Subject
                    input#subject(name="subject" maxLength="30" class="block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6")
                div 
                    label(for="content") Message 
                    textarea#content(name="content" oninput="auto_grow(this)" maxLength="200" class="block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6")
                    span(class="text-xs text-right")
                        p#counter Hi
                div
                    button(type="submit" class="flex w-full justify-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600") Add Message
        else 
            p Become a member to post a new message!
    dialog#memberDialogue(class="relative bg-white px-6 py-8 shadow-xl ring-1 ring-gray-900/5")
        h1(class="text-xl font-bold tracking-tight text-slate-900 text-nowrap max-sm:text-wrap") Become a member today! 
        form(action="/users/dashboard/members", method="POST" class="space-y-6")    
            div 
                label(for="password") Password
                input#password(name="password" type="password" class="block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6")
            div(class="flex justify-around gap-2.5")
                button(type="submit" class="flex justify-center w-full rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600") Submit 
                button(value="cancel" formmethod="dialog" class="flex w-full justify-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600") Cancel
    script(type='text/javascript').
        function auto_grow(element) {
            element.style.height = "5px";
            element.style.height = (element.scrollHeight) + "px";
        }